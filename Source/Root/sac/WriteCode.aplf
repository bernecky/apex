 WriteCode←{
     txt←⍺
     (fldr ismod)←⍵
     p←FullPathName fldr,PathDelim,'src'
     j←⎕SH'mkdir -p ',p ⍝ create subfldr if need be
     m←D 1⌷FileNameBreak fldr ⍝ Filename only
     ⍝ foo.sac for module; foo.unittest.sac for main()
     m←m,D ismod⌷(E'.unittest'),E''
     fnm←p,PathDelim,m,'.',#.globals.TargetLanguage
     z←txt PutFile fnm
     zz←('PutFile failed writing file: ',fnm)assert z
     fnm
 }
